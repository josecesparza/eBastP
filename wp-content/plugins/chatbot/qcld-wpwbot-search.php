<?php/** * Product indexing, caching & searching features concept is taken from open source 'Advanced wp Search' Wp plugin by ILLID. *///include_once( 'includes/class-wpwbot-cache.php' );include_once( 'includes/class-wpwbot-table.php' );include_once( 'includes/class-wpwbot-search.php' );function wpbo_search_site() {		$results = new WP_Query( array(		'post_type'     => array( 'post', 'page' ),		'post_status'   => 'publish',		'nopaging'      => true,		'posts_per_page'=> 10,		's'             => stripslashes( $_POST['keyword'] ),	) );			$response = array();	$response['status'] = 'fail';		if ( !empty( $results->posts ) ) {		$response['status'] = 'success';		$response['html'] = '<div class="wpb-search-result">';		$response['html'] .= '<p>We have found '.count($results->posts).' results for <b>'.$_POST['keyword'].'</b>.</p>';		foreach ( $results->posts as $result ) {			$response['html'] .= '<a href="'.$result->guid.'" target="_blank">'.$result->post_title.'</a>';		}		$response['html'] .='</div>';	}else{		$texts = unserialize(get_option('qlcd_wp_chatbot_no_result'));		$response['html'] = $texts[array_rand($texts)];	}		echo json_encode($response);	die();}add_action( 'wp_ajax_wpbo_search_site',        'wpbo_search_site' );add_action( 'wp_ajax_nopriv_wpbo_search_site', 'wpbo_search_site' );